<!DOCTYPE html>  
 <html>  
 <head>  
 <meta charset="UTF-8">
 <meta name="viewport" content="width=device-width, initial-scale=1.0">
 <title>ROAS CALCULATOR</title> 
<!-- CSS Framework Links-->
<link href="https://unpkg.com/nes.css@2.3.0/css/nes.min.css" rel="stylesheet" />
<link href="https://unpkg.com/nes.css@latest/css/nes.min.css" rel="stylesheet" />
<link href="https://unpkg.com/nes.css/css/nes-core.min.css" rel="stylesheet" />
<link href="https://fonts.googleapis.com/css?family=Press+Start+2P" rel="stylesheet">
<link href="https://unpkg.com/nes.css/css/nes.css" rel="stylesheet" />

<script>
// script.js
import "nes.css/css/nes.min.css";
</script>

<!-- CSS Styles -->
<style>
body {
  background-color: #f4f4f4;
}
}
html, body, pre, code, kbd, samp {
font-family: Press Start 2P, cursive;
font-size:12px;
}
.form {margin:5%;}
#result {margin:10%;}
label {font-size:12px;}

</style>


 </head>
 <body>
    <div class="form">
    <h1 style="margin-top:30px; margin-bottom:18px; text-align:center;" class="nes-text" >ROAS Calc.</h1>
 <div class="nes-container is-rounded">
    <form id="formroas">  
     <fieldset>
        <label>Profit margin (%):</label><br>  
        <input type="number" name="margin" id="margin" step="any" min="0,01" max="100" class="nes-input is-primary" placeholder="Example: 41.50" required><br>
        <label>Conversion rate (%):</label><br>
        <input type="number" name="rate" step="any" id="rate" min="0,01" max="100" class="nes-input is-primary" placeholder="Example: 1.57" required><br>
        <label>Avg. order value:</label><br>  
        <input type="number" name="ticket" id="ticket" min="0,01" class="nes-input is-primary" step="any" placeholder="Example: 90.85" required><br>
        <label>Avg. orders per day:</label><br> 
        <input type="number" name="orders" id="orders" min="1" class="nes-input is-primary" placeholder="Example: 17" required><br><br>
       <label> How is your goal?</label><br>
       <input type="radio" id="goal" name="goal" value="Realistic" required/> Realistic
        <br>  
        <input type="radio" id="goal" name="goal" value="Positive" required/> Positive
        <br>
        <input type="radio" id="goal" name="goal" value="Ambitious" required/> Greedy
        <br>
        <br><button type="submit" class="nes-btn" style="width:100%;">  Calculate</button>
        <br>
     </fieldset>
  </form>
   
  </div>
  </div>
    
  <br>
  <div id="result">
    <script type="text/javascript"> 
//We capture form & event, and prevent reload
    var form = document.getElementById("formroas")
    form.addEventListener("submit", validateform)
    function validateform(e) {
    e.preventDefault();
//We take all values from the form
    var margin = document.getElementById("margin").value
    var rate = document.getElementById("rate").value
    var ticket = document.getElementById("ticket").value
    var orders = document.getElementById("orders").value
    var goal = document.querySelector('input[name="goal"]:checked').value//We use jquery to get this value because we did not find the way to do it with pure JavaScript code
//We set new variables from actual data
    var clicks = 100 / ((rate / 100) * 100)
    var cpamax = (ticket/100) * margin
    var cpcmax = cpamax / clicks
    var roas = ticket / cpamax
//We set new variables for the future goal
    var uproas;//We declare the variable and then we assign values based on input
    if(goal == "Realistic") {uproas = 1.75;}
    if(goal == "Positive") {uproas = 2.5;}
    if(goal == "Ambitious") {uproas = 4.0;}
    var newroas = uproas * roas
    var newcpa = ticket / newroas
//We create a new variable to get a div
    var result = document.getElementById("result");
// We show results in the new variable (div)
    result.innerHTML =`
    <h2 class="nes-balloon from-left nes-pointer">To avoid losing money...</h2>
    <i class="nes-octocat animate from-left"></i><i class="nes-icon coin is-medium"></i>

    <hr style="border-top: 3px solid black;"><br>
    <p>Be aware you need a ROAS greater than <span class="nes-text is-success">${roas.toFixed(2)}</span>.</p>
    <p>Keep in mind your CPA cannot exceed <span class="nes-text is-error">${cpamax.toFixed(2)}€</span>.</p>
    <p>And try to keep your average CPC under <span class="nes-text is-warning">${cpcmax.toFixed(2)}€<span>.</p>
    <br><br>
     <h2 class="nes-balloon from-right nes-pointer">Based on your goal...</h2>
    <div style="text-align:right;"><i class="nes-octocat animate from-right"></i><i class="nes-icon trophy is-medium"></i>
</div>
    <hr style="border-top: 3px solid black;"><br>
    <p>You want to achieve a <strong>${goal}</strong> goal.</p> 
    <p>So you are looking for a ROAS greater than  <strong><span class="nes-text is-success">${newroas.toFixed(2)}</span></strong>.</p>  
    <p>Start reducing your CPA to <span class="nes-text is-warning">${newcpa.toFixed (2)}€</span>.</p>
    <br>
    `
    } 
    </script>
  </div>
 </body>
 </html>